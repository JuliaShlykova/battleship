(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),a=n(8),r=n.n(a),o=(n(14),n(15),n(3)),s=n(2),u=(n(16),n(0)),l=function(e){var t=e.index,n=e.boardCell,c=e.boardName,i=e.receiveAttack,a=void 0===i?function(){}:i,r=n.ship,o=n.isHit;console.log("rendering cells");return Object(u.jsxs)("div",{className:"cell \n    ".concat(o?"":"cell-active"," \n    ").concat(r?"cell-ship":"","\n    ").concat(r&&r.isSunk()?"cell-sunk":""),index:t,onClick:o||"player-board"===c?null:function(){console.log("cell is atacked"),a(c,t),console.log("ship: ",r,"isHit: ",o)},children:[!r&&o?Object(u.jsx)("div",{className:"cell-missed"}):null,r&&o?Object(u.jsx)("div",{className:"cell-hit"}):null]})},b=function(e){var t=e.boardName,n=e.gameboard,c=e.receiveAttack,i=e.announce;return Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:i}),Object(u.jsx)("div",{className:"board",name:t,children:function(){for(var e=[],i=0;i<100;i++)e.push(Object(u.jsx)(l,{index:i,boardName:t,boardCell:n[i],receiveAttack:c},i));return e}()})]})},h=n(9),d=function(e,t){var n=[];return{length:e,position:t,hits:n,hit:function(e){n.push(e)},isSunk:function(){return t.every((function(e){return n.includes(e)}))}}},j=function(){var e,t;return{init:function(){e=[],t=0;for(var n=0;n<100;n++)e.push({ship:!1,isHit:!1})},getBoard:function(){return e},placeShip:function(t,n){var c,i=d(t,n),a=Object(h.a)(n);try{for(a.s();!(c=a.n()).done;){var r=c.value;e[r].ship=i}}catch(o){a.e(o)}finally{a.f()}},allShipsSunk:function(e){return t===e},receiveAttack:function(n){return e[n].isHit=!0,e[n].ship?(e[n].ship.hit(n),e[n].ship.isSunk()?(t+=1,"Ship is sunk!"):"Ship is hit!"):"Miss!"}}},f=n(7),p=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],c=10-e;c<=99;c+=10)for(var i=c+e-10;i<=c;){if(!t.includes(i)){for(var a=[i+1],r=i+2;r-i<e;)a.push(r),r++;if(a.some((function(e){return t.includes(e)}))){i++;continue}n.push(i)}i++}for(var o=n[Math.floor(Math.random()*n.length)],s=o,u=[];s-o<=e-1;)u.push(s),s++;return u},O=function(){var e=j();return e.init(),function(e){for(var t=[],n=0,c=[5,4,3,3,2];n<c.length;n++){for(var i=c[n],a=p(i,t),r=0;r<i;r++)t.push(a[r]),a[r]-10>=0&&t.push(a[r]-10),a[r]+10<=99&&t.push(a[r]+10),0===r&&a[r]%10!==0&&(t.push(a[r]-1),a[r]+10-1<=99&&t.push(a[r]+10-1),a[r]-10-1>=0&&t.push(a[r]-10-1)),r===i-1&&a[r]%10!==9&&(t.push(a[r]+1),a[r]+10+1<=99&&t.push(a[r]+10+1),a[r]-10+1>=0&&t.push(a[r]-10+1));e.placeShip(i,a)}}(e),e},v=function(){var e=Object(c.useState)(O()),t=Object(s.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(O()),r=Object(s.a)(a,2),l=r[0],h=r[1],d=Object(c.useState)(Object(o.a)(n.getBoard())),j=Object(s.a)(d,2),p=j[0],v=j[1],m=Object(c.useState)(Object(o.a)(l.getBoard())),g=Object(s.a)(m,2),k=g[0],x=g[1],S=Object(c.useState)("Waiting..."),N=Object(s.a)(S,2),A=N[0],B=N[1],y=Object(c.useState)("Waiting..."),w=Object(s.a)(y,2),M=w[0],C=w[1],H=Object(c.useState)("No winner"),W=Object(s.a)(H,2),E=W[0],J=W[1];console.log("constructing main");Object(f.useEffect)((function(){v(Object(o.a)(n.getBoard())),B("Waiting...")}),[n]),Object(f.useEffect)((function(){x(Object(o.a)(l.getBoard())),C("Waiting...")}),[l]);var z=function e(t,c){if("player-board"===t)B(n.receiveAttack(c)),v(Object(o.a)(n.getBoard())),n.allShipsSunk(5)&&J("Computer won");else{C(l.receiveAttack(c)),x(Object(o.a)(l.getBoard())),l.allShipsSunk(5)&&J("You won");var i=p.map((function(e,t){return t})).filter((function(e){return!p[e].isHit}));e("player-board",i[Math.floor(Math.random()*i.length)])}};return Object(u.jsxs)("main",{children:[Object(u.jsx)("h1",{children:E}),Object(u.jsxs)("div",{className:"boards-zone",children:[Object(u.jsx)(b,{boardName:"player-board",gameboard:p,receiveAttack:z,announce:A}),Object(u.jsx)(b,{boardName:"computer-board",gameboard:k,receiveAttack:z,announce:M})]}),Object(u.jsx)("button",{onClick:function(){i(O()),h(O()),J("No winner")},children:"New Game"})]})};var m=function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("span",{children:"Battleship"}),Object(u.jsx)(v,{})]})};r.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(m,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.273807c5.chunk.js.map